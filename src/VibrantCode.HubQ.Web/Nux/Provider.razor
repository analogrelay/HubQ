@typeparam TState
@inject StoreFactory<TState> StoreFactory

@{ 
    if(InitialState == null)
    {
        throw new InvalidOperationException("InitialState must be specified!");
    }
    var store = StoreFactory.CreateStore(InitialState);
}

<CascadingValue Value="store">
    @ChildContent(store)
</CascadingValue>

@functions
{
    [Parameter] TState InitialState { get; set; } = default!;
    [Parameter] RenderFragment<Store<TState>>? ChildContent { get; set; }
}